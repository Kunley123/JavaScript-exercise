<!DOCTYPE html>
<html>

<head>
    <title>
        App
    </title>
</head>

<body>
    <button class="js-start-button" onclick="
    ">
        Start
    </button>

    <button class="js-loading-start" onclick="
       ">
        Start
    </button>

    <button class="js-add-to-cart" onclick="
    ">
        Add to Cart
    </button>

    <button class="js-add-to-carts" onclick="
    ">
        Add to Cart
    </button>

    <p class="js-added"></p>
    <p class="js-added"></p>
    <br><br>

    <button class="js-add-button" onclick="
    message++; displayNotification()">
        Add
    </button>
    <button class="js-remove-button" onclick="
    if (message > 0) {
        message--;
        if(message === 0) {
            stopNotification();
        }
     } ">
        Remove
    </button>


    <script>
        // const add = function addIt() {
        //     console.log((2 + 3));
        // }
        // add();
        // add();


        const add = function () {
            console.log((2 + 3));
        }
        add();
        add();

        function runTwice(fun) {
            fun();
            fun();
        }

        runTwice(function () {
            console.log('12b');
        });
        runTwice(add);



        // function startButton() {
        //     let button = document.querySelector('.js-start-button');

        //     setTimeout(function () {
        //         button.innerHTML = 'Finished!'
        //     }, 1000)
        // }



        // Using arrow function instead of the normal function
        // used in the comment above.
        //function inside function
        let button = document.querySelector('.js-start-button');
        button.addEventListener('click', startButton)
        function startButton() {
            let button = document.querySelector('.js-start-button');
            setTimeout(() => {
                button.innerHTML = 'Finished!'
            }, 1000)
        }


        // function updateButton() {
        //     let button = document.querySelector('.js-loading-start');
        //     button.innerHTML = 'Loading...'
        //     setTimeout(function () {
        //         button.innerHTML = 'Finished!'
        //     }, 1000)
        // }



        // Using arrow function instead of the normal function
        // used in the comment above.
        //function inside function
        let buttons = document.querySelector('.js-loading-start');
        buttons.addEventListener('click', updateButton)
        function updateButton() {
            let button = document.querySelector('.js-loading-start');
            button.innerHTML = 'Loading...'
            setTimeout(() => {
                button.innerHTML = 'Finished!'
            }, 1000)
        }


        // function updateAdded() {
        //     const added = document.querySelector('.js-added');
        //     added.innerHTML = 'Added'
        //     setTimeout(function () {
        //         added.innerHTML = '';
        //     }, 2000);
        // }



        // Using arrow function instead of the normal function
        // used in the comment above.
        //function inside function
        let newAdded = document.querySelector('.js-add-to-cart');
        newAdded.addEventListener('click', updateAdded);
        function updateAdded() {
            const added = document.querySelector('.js-added');
            added.innerHTML = 'Added'
            setTimeout(() => {
                added.innerHTML = '';
            }, 2000);
        }


        // let timeoutId;
        // function updateAdded() {
        //     const added = document.querySelector('.js-added');
        //     added.innerHTML = 'Added';

        //     clearTimeout(timeoutId);
        //     timeoutId = setTimeout(function () {
        //         added.innerHTML = '';
        //     }, 2000);
        // }



        // Using arrow function instead of the normal function
        // used in the comment above.
        //function inside function
        let timeoutId;
        const addedNew = document.querySelector('.js-add-to-carts');
        addedNew.addEventListener('click', updateAdded)
        function updateAdded() {
            const added = document.querySelector('.js-added');
            added.innerHTML = 'Added';
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                added.innerHTML = '';
            }, 2000);
        }


        // setInterval(function () {
        //     if (document.title === 'App') {
        //         document.title = '(2) New messages'
        //     } else {
        //         document.title = 'App'
        //     }
        // }, 1000)

        let message = 2;
        let intervalId;
        let isDisplayingNotification;

        displayNotification();

        function displayNotification() {
            if (isDisplayingNotification) {
                return;
            }

            isDispayingNotification = true;
        }


        intervalidId = setInterval(function () {
            if (document.title === 'App') {
                document.title = `(${message}) New messages`
            } else {
                document.title = 'App'
            }
        }, 1000)

        function stopNotification() {
            isDisplayingNotification = false;

            clearInterval(intervalId);
            document.title = "App";


        }



    </script>

</body>

</html>