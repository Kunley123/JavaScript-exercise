<!DOCTYPE html>
<html>

<head>
    <title>
        App
    </title>
</head>

<body>

    <button class="js-start-button" onclick="
       startButton() ">
        Start
    </button>

    <button class="js-loading-start" onclick="
       updateButton() ">
        Start
    </button>

    <button class="js-add-to-cart" onclick="
    updateAdded()">
        Add to Cart
    </button>

    <button class="js-add-to-cart" onclick="
    updateAdded()">
        Add to Cart
    </button>

    <p class="js-added"></p>
    <p class="js-added"></p>
    <br><br>

    <button class="js-add-button" onclick="
    message++; displayNotification()">
        Add
    </button>
    <button class="js-remove-button" onclick="
    if (message > 0) {
        message--;
        if(message === 0) {
            stopNotification();
        }
     } ">
        Remove
    </button>


    <script>
        // const add = function addIt() {
        //     console.log((2 + 3));
        // }
        // add();
        // add();


        const add = function () {
            console.log((2 + 3));
        }
        add();
        add();

        function runTwice(fun) {
            fun();
            fun();
        }

        runTwice(function () {
            console.log('12b');
        });
        runTwice(add);



        function startButton() {
            let button = document.querySelector('.js-start-button');

            setTimeout(function () {
                button.innerHTML = 'Finished!'
            }, 1000)
        }


        function updateButton() {
            let button = document.querySelector('.js-loading-start');
            button.innerHTML = 'Loading...'
            setTimeout(function () {
                button.innerHTML = 'Finished!'
            }, 1000)
        }

        function updateAdded() {
            const added = document.querySelector('.js-added');
            added.innerHTML = 'Added'
            setTimeout(function () {
                added.innerHTML = '';
            }, 2000);
        }


        let timeoutId;
        function updateAdded() {
            const added = document.querySelector('.js-added');
            added.innerHTML = 'Added';

            clearTimeout(timeoutId);
            timeoutId = setTimeout(function () {
                added.innerHTML = '';
            }, 2000);
        }

        // setInterval(function () {
        //     if (document.title === 'App') {
        //         document.title = '(2) New messages'
        //     } else {
        //         document.title = 'App'
        //     }
        // }, 1000)

        let message = 2;
        let intervalId;
        let isDisplayingNotification;

        displayNotification();

        function displayNotification() {
            if (isDisplayingNotification) {
                return;
            }

            isDispayingNotification = true;
        }


        intervalidId = setInterval(function () {
            if (document.title === 'App') {
                document.title = `(${message}) New messages`
            } else {
                document.title = 'App'
            }
        }, 1000)

        function stopNotification() {
            isDisplayingNotification = false;

            clearInterval(intervalId);
            document.title = "App";


        }



    </script>

</body>

</html>